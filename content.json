{"meta":{"title":"小白同学的博客","subtitle":"","description":"本站是小白同学技术分享博客","author":"小白同学","url":"https://blog-wangyong.xyz","root":"/"},"pages":[{"title":"analytics","date":"2020-12-29T13:42:15.426Z","updated":"2020-12-28T15:36:41.812Z","comments":true,"path":"analytics/index.html","permalink":"https://blog-wangyong.xyz/analytics/index.html","excerpt":"","text":""},{"title":"about","date":"2020-12-31T04:56:57.341Z","updated":"2020-12-31T04:56:57.341Z","comments":true,"path":"about/index.html","permalink":"https://blog-wangyong.xyz/about/index.html","excerpt":"","text":"与&nbsp; 小白同学&nbsp; （ ） 通话中： 小白同学🐷🐵🐟 GitHub：LWANGYONG QQ：3285884651 微信：QQIDWeChat666"},{"title":"friends","date":"2020-12-29T13:42:15.427Z","updated":"2020-12-21T15:58:44.478Z","comments":true,"path":"friends/index.html","permalink":"https://blog-wangyong.xyz/friends/index.html","excerpt":"","text":""},{"title":"categories","date":"2020-12-29T13:42:15.427Z","updated":"2020-12-21T15:55:15.730Z","comments":true,"path":"categories/index.html","permalink":"https://blog-wangyong.xyz/categories/index.html","excerpt":"","text":""},{"title":"歌单","date":"2020-12-23T02:57:17.000Z","updated":"2020-12-29T03:40:07.732Z","comments":true,"path":"music/index.html","permalink":"https://blog-wangyong.xyz/music/index.html","excerpt":"","text":"initRunner('#container'); function cancelSpace(e){ var e = e|| window.event; var elm = e.srcElement || e.target; var key = e.keyCode || e.charCode; if(key == 32){ if(elm.tagName.toLowerCase()==\"input\" && elm.type.toLowerCase()==\"text\" || elm.tagName.toLowerCase() == \"textarea\"){ return; } if(window.event){ e.returnValue = false; } else{ e.preventDefault(); } } } document.onkeypress=cancelSpace; 👉键盘上“空格”或“↑键”开始🎮游戏，手机端点🦖👈，“↑键”或“空格”跳跃，“↓键”趴下，欢迎成绩留言~(●’◡’●)~"},{"title":"Gallery","date":"2020-12-29T13:42:15.428Z","updated":"2020-12-21T16:02:40.927Z","comments":true,"path":"photos/index.html","permalink":"https://blog-wangyong.xyz/photos/index.html","excerpt":"","text":""},{"title":"shuoshuo","date":"2020-12-29T13:42:15.429Z","updated":"2020-12-28T15:25:56.216Z","comments":true,"path":"shuoshuo/index.html","permalink":"https://blog-wangyong.xyz/shuoshuo/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-12-29T13:42:15.429Z","updated":"2020-12-21T15:57:57.074Z","comments":true,"path":"tags/index.html","permalink":"https://blog-wangyong.xyz/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"LINUX运维学习之综合架构篇——架构搭建准备","slug":"综合架构","date":"2020-12-28T12:08:59.000Z","updated":"2020-12-28T13:29:09.545Z","comments":true,"path":"article/f439b05e.html","link":"","permalink":"https://blog-wangyong.xyz/article/f439b05e.html","excerpt":"","text":"1、综合架构组成说明用户访问网站是使用HTTP协议80端口，查看80端口是否开启 netstat -lntup|grep 80 web服务器：让用户访问需要公网IP地址，域名解析，当访问网站的用户较多，同时写入增多消耗IO，服务器磁盘压力，为了缓解压力，用户在网站的注册等某些字符串信息，那就存储到数据库服务器，图片视频附件等存储在存储服务器，不够用是也可以配置多台服务器 随着用户使用的增多，数据库，存储服务器可能损坏，就要有一个备份服务器，将数据库及存储服务器中的数据定时备份到备份服务器中，为了防止备份服务器损坏，要考虑多台备份服务器，尽量不要把备份服务器服务器放在同一个地方，用户不断增加，一个web服务器明显不够，就要增加多台web服务器，减缓第一台web服务器的压力。 为了防止黑客非法入侵，配置防火墙服务 所以这个小型架构用户访问时先访问到防火墙，再到负载均衡设备，再到相应web服务器，根据存储的内容，在分配到数据库或者存储服务器，为了防止负载均衡设备出问题也可以配置多台，叫高可用架构。用户先访问一台，一台出问题了再访问第二台，首先访问的叫主服务器，第二台叫备服务器 用户访问网站一般浏览网站比写入数据到网站的行为更多，为了让用户读的更快，加速读取数据，配置缓存服务器，将磁盘重点，热点数据存储到缓存服务器，再存储到内存中，用户就可以从缓存服务器读取数据，写入也可以，如果读取的数据没有，再根据访问的内容访问数据库服务器或者存储服务器，缓存也可以多台。 数据分析服务器可以把存储的数据调取过来分析，也可以分析日志，也是分为个小型架构，叫消息队列结构，前端收集数据，后端进行数据分析，将结果以图形的方式展示出来，用awk或者ELK进行数据分析 已经部署了很多设备，为了实现对架构更好的管理，可以配置监控服务器，如果有其他多个机房也可以配置多个监控服务器，叫代理监控服务器，一个主的监控服务器，master表示，这样可以对所有企业里的服务器做监控管理。 结构的服务器设备太多，需要管理这一堆架构，实现部署配置需要，在配置一个批量管理服务器，跟每台服务器建立联系。 对于用户的访问渠道有了，对于运维人员，走另一条路，为了保证安全性，配置VPN服务器，让只有内部的人可以连接进入，类似于一个特殊通道，需要用户名密码验证，通过后就可以连接访问管理任意一台服务器。 为了防止内部人员做出破坏性行为，为内部人员访问做出监管，配置跳板机服务器，VPN，跳板机，批量管理，监控等服务器叫做网站运维人员管理网站的架构，通过这个架构，可以更好地方便对网站庞大的服务器监控管理，以及出现问题了可以记录用户的操作行为。以上就完成了一个中小规模的完整企业架构。 2、综合架构规划 主机名称 IP地址规划 需要的软件 防火墙服务器（firewalld) 10.0.0.81（外网） 172.16.1.81(内网) 负载均衡服务器（lb01） 10.0.0.5 (外网) 172.16.1.5（内网） nginx keepalived 负载均衡服务器（lb02） 10.0.0.6 (外网) 172.16.1.6（内网） nginx keepalived web服务器（web01) 10.0.0.7 (外网) 172.16.1.7 (内网) nginx web服务器（web02) 10.0.0.8 (外网) 172.16.1.8 (内网) nginx web服务器（web03) 10.0.0.9 (外网) 172.16.1.9 (内网) nginx 数据库（db01) 10.0.0.51(外网) 172.16.1.51（内网） MySQL 存储服务器（nfs01） 10.0.0.31(外网) 172.16.1.31（内网） nfs 备份服务器（backup） 10.0.0.41（外网） 172.16.1.41（内网） rsync 批量管理服务器（m01） 10.0.0.61(外网) 172.16.1.61（内网） ansible 跳板机服务器（jumpserver） 10.0.0.71(外网) 172.16.1.71（内网） jumpserver 监控服务器（zabbix） 10.0.0.72(外网) 172.16.1.72（内网） zabbix 由于资源有限，只能用虚拟机进行模拟测试 1、优化配置模板主机进行网卡配置 之前模板主机第一张网卡IP地址为10.0.0.200 所以在添加一张网卡，IP地址为171.16.1.200 a、添加网卡 b、配置网卡 vim /etc/sysconfig/network-scripts/ifcfg-eth1 或者输入 nmtui 图形化界面配置网卡 2、系统优化过程1）模板机优化配置——hosts 文件配置先备份一下hosts文件 \\cp /etc/hosts&#123;.bak&#125; cat &gt;/etc/hosts&lt;&lt;EOF 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6172.16.1.5 lb01 172.16.1.6 lb02 172.16.1.7 web01 172.16.1.8 web02 172.16.1.9 web03 172.16.1.51 db01 db01.etiantian.org 172.16.1.31 nfs01 172.16.1.41 backup 172.16.1.61 m01 172.16.1.71 jumpserver 172.16.1.72 zabbixEOF 2）模板机优化配置——跟新yum源更改yum源 mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup &amp;&amp;\\ curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo yum install -y wget wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo 3）模板机优化配置——关闭selinuxsed -i.bak &#39;s/SELINUX=enforcing/SELINUX=disabled/&#39; /etc/selinux/config grep SELINUX=disabled /etc/selinux/config 4) 模板机优化配置——关闭iptablessystemctl stop firewalld systemctl disable firewalld systemctl ststus firewalld 5) 模板机优化配置——普通用户oldboy可以使用sudouseradd oldboy echo 123456|passwd --stain oldboy echo &quot;oldboy ALL=(ALL) NOPASSWD: ALL &quot;&gt;&gt;/etc/sudoers tail -1 /etc/sudoers visudo -c 6) 模板机优化配置——英文字符集先查看一下 echo $LANG 修改 localectl set-locale LANG=&quot;en_US.UTF-8&quot; 重启 reboot echo $LANG 7) 模板机优化配置——时间同步下载软件 yum install -y ntpdate echo &#39;#time sync by lidao at 2020-12-03&#39; &gt;&gt;/var/spool/cron/root 添加注释 echo &#39;*/5 * * * * /usr/sbin/ntpdate ntp1.aliyun.com &gt;/dev/null 2&gt;&amp;1&#39; &gt;&gt;/var/spool/cron/root 每隔五分钟同步一次 crontab -l 查看 8) 模板机优化配置——加大文件描述yum install -y lsoflsof -i:22 echo &#39;* - nofile 1024&#39; &gt;&gt;/etc/security/limits.conf source /etc/security/limits.conf 说明：一个服务进程运行起来，会打开相应的文件 9) 模板机优化配置——安装其他小软件yum install lrzsz nmap tree dos2unix nc telnet bash-completion bash-completion-extras -y 当然以上命令，也可以写成一个脚本，方法有很多，这里就不介绍了，可自行百度。","categories":[],"tags":[{"name":"综合架构","slug":"综合架构","permalink":"https://blog-wangyong.xyz/tags/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/"}]},{"title":"ansible","slug":"ansible","date":"2020-12-28T12:05:59.000Z","updated":"2020-12-28T13:14:58.633Z","comments":true,"path":"article/c5cc7aa1.html","link":"","permalink":"https://blog-wangyong.xyz/article/c5cc7aa1.html","excerpt":"","text":"","categories":[],"tags":[]},{"title":"TCP协议的三次握手和四次挥手","slug":"TCP协议的三次握手和四次挥手","date":"2020-12-27T14:42:06.160Z","updated":"2020-12-27T14:52:48.128Z","comments":true,"path":"article/109c512.html","link":"","permalink":"https://blog-wangyong.xyz/article/109c512.html","excerpt":"","text":"1、TCP协议是什么？ 传输控制协议（Transmission Control Protocol，TCP）是一种面向连接的、可靠的、基于字节流的传输层通信协议。在 TCP 协议中，通过三次握手建立连接。通信结束后，还需要断开连接。如果在发送数据包时，没有正确被发送到目的地时，将会重新发送数据包。 2、TCP的工作模式？ TCP 协议的数据包进行传输采用的是服务器端和客户端模式。发送 TCP 数据请求方为客户端，另一方则为服务器端。客户端要与服务器端进行通信，服务器端必须开启监听的端口，客户端才能通过端口连接到服务器，然后进行通信。 3、TCP的三次握手 第一次握手： 发送syn请求建立连接字段，发送seq序列号信息，第一个数据包的序列号默认为（X） 第二次握手： 发送syn请求建立连接字段，同时发送ack确认控制字段，发送seq序列号信息为（Y），还会发送ack确认号（X+1）信息（对上一个数据列号信息进行确认） 第三次握手： 发送ack确认控制字段，发送seq序列号信息（X+1），发送ack确认号（X+1） 4、TCP的四次挥手过程 第一次挥手： 发送fin请求断开连接控制字段 第二次挥手： 发送ack确认控制字段 第三次挥手： 发送fin请求断开连接字段，发送ack确认字段 第四次挥手： 发送ack控制字段，断开连接","categories":[],"tags":[{"name":"网络","slug":"网络","permalink":"https://blog-wangyong.xyz/tags/%E7%BD%91%E7%BB%9C/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-12-20T13:53:21.248Z","updated":"2020-12-29T04:33:24.214Z","comments":true,"path":"article/16107.html","link":"","permalink":"https://blog-wangyong.xyz/article/16107.html","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot; More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","categories":[],"tags":[{"name":"Hello World","slug":"Hello-World","permalink":"https://blog-wangyong.xyz/tags/Hello-World/"}]}],"categories":[],"tags":[{"name":"综合架构","slug":"综合架构","permalink":"https://blog-wangyong.xyz/tags/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/"},{"name":"网络","slug":"网络","permalink":"https://blog-wangyong.xyz/tags/%E7%BD%91%E7%BB%9C/"},{"name":"Hello World","slug":"Hello-World","permalink":"https://blog-wangyong.xyz/tags/Hello-World/"}]}